<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

    <record id="paperformat_letter_landscape" model="report.paperformat">
        <field name="name"> Letter Landscape</field>
        <field name="default" eval="True" />
        <field name="format">Letter</field>
        <field name="page_height">0</field>
        <field name="page_width">0</field>
        <field name="orientation">Landscape</field>
        <field name="margin_top">40</field>
        <field name="margin_bottom">23</field>
        <field name="margin_left">7</field>
        <field name="margin_right">7</field>
        <field name="header_line" eval="False" />
        <field name="header_spacing">35</field>
        <field name="dpi">90</field>
    </record>
    
        <report id="report_infonavit_employee"
          string="Empleados con creditos infonavit"
          model="wizard.expired.contracts" 
          report_type="qweb-pdf" 
          name="payroll_mexico.template_infonavit_employee"
          paperformat="payroll_mexico.paperformat_letter_landscape"
         />
         
        <template id="template_infonavit_employee" >
            <t t-call="web.internal_layout">
                <t t-call="web.html_container">
                    <div class="page" style="font-size:12px">
                        <h4 class="text-center">Consulta de Trabajadores con Crédito INFONAVIT</h4>
                        <br/>
                        <br/>
                        <br/>
                        <br/>
                        <table class="table" style="border-style: none;">
                            <tbody>
                                <tr>
                                    <td colspan="2"><strong>GRUPO: </strong>
                                <span t-esc="data['group']"/></td>
                                    <td colspan="2"><strong>REGISTRO PATRONAL: </strong>
                                <span t-esc="data['employer_register']"/></td>
                                    <td colspan="2"><strong>CENTRO DE TRABAJO: </strong>
                                <span t-esc="data['work_center']"/></td>
                                </tr>
                                <tr t-if="data['date_from'] and data['date_to']">
                                    <td colspan="3"><strong>DESDE: </strong>
                                <span t-esc="data['date_from']"/></td>
                                    <td colspan="3"><strong>HASTA: </strong>
                                <span t-esc="data['date_to']"/></td>
                                </tr>
                            </tbody>
                        </table>
                        <table class="table table-bordered">
                            <tbody>
                                <table class="table">
                                    <th colspan="1" class="text-center" style="border: 1px !important; border-style: solid !important; border-color: #000000; color:#000000 !important; "><strong>Número de trabajador</strong></th>
                                    <th colspan="1" class="text-center" style="border: 1px !important; border-style: solid !important; border-color: #000000; color:#000000 !important; "><strong>N.S.S.</strong></th>
                                <th colspan="2" class="text-center" style="border: 1px !important; border-style: solid !important; border-color: #000000; color:#000000 !important; "><strong>Nombre</strong></th>
                                <th colspan="1" class="text-center" style="border: 1px !important; border-style: solid !important; border-color: #000000; color:#000000 !important; "><strong>R.F.C.</strong></th>
                                <th colspan="1" class="text-center" style="border: 1px !important; border-style: solid !important; border-color: #000000; color:#000000 !important; "><strong>C.U.R.P.</strong></th>
                                <th colspan="1" class="text-center" style="border: 1px !important; border-style: solid !important; border-color: #000000; color:#000000 !important; "><strong>Sexo</strong></th>
                                <th colspan="1" class="text-center" style="border: 1px !important; border-style: solid !important; border-color: #000000; color:#000000 !important; "><strong>Tipo de trabajador</strong></th>
                                <th colspan="1" class="text-center" style="border: 1px !important; border-style: solid !important; border-color: #000000; color:#000000 !important; "><strong>Fecha de ingreso</strong></th>
                                <tr>
                                    <th colspan="2" class="text-center" style="border: 1px !important; border-style: solid !important; border-color: #000000; color:#000000 !important; "><strong>Tipo de Movimiento</strong></th>
                                    <th colspan="1" class="text-center" style="border: 1px !important; border-style: solid !important; border-color: #000000; color:#000000 !important; "><strong>Fecha</strong></th>
                                    <th colspan="1" class="text-center" style="border: 1px !important; border-style: solid !important; border-color: #000000; color:#000000 !important; "><strong>Número de credito</strong></th>
                                    <th colspan="3" class="text-center" style="border: 1px !important; border-style: solid !important; border-color: #000000; color:#000000 !important; "><strong>Tipo de descuento</strong></th>
                                    <th colspan="1" class="text-center" style="border: 1px !important; border-style: solid !important; border-color: #000000; color:#000000 !important; "><strong>Valor de descuento</strong></th>
                                    <th colspan="1" class="text-center" style="border: 1px !important; border-style: solid !important; border-color: #000000; color:#000000 !important; "><strong>Aplica descuento</strong></th>
                                </tr>
                                <t t-set="counter" t-value="1"/>
                                <t t-foreach="docs" t-as="o">
                                    <tr>
                                        <td colspan="1" class="text-center"><span t-esc="counter"/></td>
                                        <td colspan="1" class="text-center"><span t-field="o.ssnid"/></td>
                                        <td colspan="2" class="text-center"><span t-field="o.name"/></td>
                                        <td colspan="1" class="text-center"><span t-field="o.rfc"/></td>
                                        <td colspan="1" class="text-center"><span t-field="o.curp"/></td>
                                        <td colspan="1" class="text-center"><span t-field="o.gender"/></td>
                                        <td colspan="1" class="text-center">??????????</td>
                                        <td colspan="1" class="text-center">??????????</td>
                                    </tr>
                                    <tr t-foreach="o.infonavit_ids.history_ids" t-as="o">
                                        <td colspan="2" class="text-center"><span t-field="o.move_type"/></td>
                                        <td colspan="1" class="text-center"><span t-field="o.create_date"/></td>
                                        <td colspan="1" class="text-center"><span t-field="o.credit_id.infonavit_credit_number"/></td>
                                        <td colspan="3" class="text-center"><span t-field="o.discount_type"/></td>
                                        <td colspan="1" class="text-center"><span t-field="o.discount_value"/></td>
                                        <td colspan="1  " class="text-center"><span t-esc="'Si' if o.apply_discount else 'NO'"/></td>
                                    </tr>
                                    <t t-set="counter" t-value="counter+1"/>
                                </t>
                                </table>
                            </tbody>
                            <tfooter>
                                <tr>
                                    <td colspan="7" class="text-right">Total trabajadores</td>
                                    <td colspan="2" class="text-right"><t t-esc="counter"/></td>
                                </tr>

                            </tfooter>
                        </table>
                    </div>
                </t>
            </t>
        </template>
        
    </data>
</odoo>
