<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="view_hr_payroll_dispersion_export_txt" model="ir.ui.view">
        <field name="name">Dispersion de Nómina txt</field>
        <field name="model">payroll.dispersion.txt</field>
        <field name="arch" type="xml">
            <form string="Descargar TXT Dispersion de Nómina">
                <div class="alert alert-info text-center" role="alert" style="margin-bottom:0px;">
                    Se generado el Reporte TXT correctamente, proceda a descargarlo.
                </div>
                <group>
                    <field name="txt_file" readonly="1" filename="file_name"/>
                    <field name="file_name" invisible="1"/>
                </group>
                <footer>
                    <button string="Cerrar" class="oe_link" special="cancel" />
                </footer>
            </form>
        </field>
    </record>
    
    <record id="wizard_payroll_dispersion_form_wizard" model="ir.ui.view">
        <field name="name">wizard.payroll.dispersion.form.wizard</field>
        <field name="model">payroll.dispersion.txt.wizard</field>
        <field name="arch" type="xml">
            <form>
                <group>
                    <group>
                         <field name="estructure_ids" widget="many2many_tags" options="{'no_create': True, 'no_open': True}"/>
                    </group>
                    <group>
                        <field name="company_ids" widget="many2many_tags" options="{'no_create': True, 'no_open': True}"/>
                    </group>
                    <group>
                        <field name="employer_register_ids" widget="many2many_tags" options="{'no_create': True, 'no_open': True}"/>
                    </group>
                    <group>
                         <field name="bank_id"/>
                    </group>
                    <group>
                        <field name="account_type"/>
                    </group>
                        <field name="payslip_run_id" invisible="True"/>
                    <field name="payslip_ids" domain="[('payslip_run_id','=',payslip_run_id)]">
                        <tree>
                            <field name="complete_name"/>
                            <field name="employee_id"/>
                            <field name="date_from"/>
                            <field name="date_to"/>
                            <field name="state"/>
                            <field name="payslip_run_id"/>
                        </tree>
                    </field>
                </group>
           <footer>
                <button string="Generar layout catalogo" name="report_print" type="object" default_focus="1" class="btn-primary"/>
                <button string="Generar layout pagos" name="report_print_payments" type="object" default_focus="1" class="btn-primary"/>
                <button string="Cancel" class="btn-default" special="cancel"/>
            </footer>
           </form>
        </field>
    </record>
    
    <act_window
        id="action_wizard_payroll_dispersion_txt"
        name="Generate dispersion txt dispersion"
        res_model="payroll.dispersion.txt.wizard"
        view_mode="form"
        multi="True"
        target="new"
       />

</odoo>
